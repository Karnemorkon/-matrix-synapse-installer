# üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è Matrix Synapse Installer

## üìã –û–≥–ª—è–¥ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–¶–µ–π –∫–∞—Ç–∞–ª–æ–≥ –º—ñ—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç–∏ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ Matrix Synapse Installer.

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### –ó–∞–ø—É—Å–∫ –≤—Å—ñ—Ö —Ç–µ—Å—Ç—ñ–≤

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Ç–µ—Å—Ç–∏ —è–∫ root (–ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–ª—è –ø–æ–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)
sudo ./tests/test-installation.sh
```

### –ó–∞–ø—É—Å–∫ –æ–∫—Ä–µ–º–∏—Ö —Ç–µ—Å—Ç—ñ–≤

```bash
# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–Ω–∏—Ö –≤–∏–º–æ–≥
sudo ./tests/test-installation.sh system-requirements

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
sudo ./tests/test-installation.sh configuration

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è Docker
sudo ./tests/test-installation.sh docker
```

## üìä –¢–∏–ø–∏ —Ç–µ—Å—Ç—ñ–≤

### 1. **–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ —Ç–µ—Å—Ç–∏**
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º–Ω–∏—Ö –≤–∏–º–æ–≥
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ñ–∞–π–ª—ñ–≤ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
- –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–µ—Ä–≤—ñ—Å–∞–º–∏

### 2. **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏**
- –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Docker
- –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ API
- –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

### 3. **–¢–µ—Å—Ç–∏ –±–µ–∑–ø–µ–∫–∏**
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤
- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ñ–∞–π—Ä–≤–æ–ª—É

### 4. **–¢–µ—Å—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ**
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤
- –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è
- –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥—ñ–≤

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

### –í–∏–º–æ–≥–∏ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –°–∏—Å—Ç–µ–º–Ω—ñ –≤–∏–º–æ–≥–∏
- Ubuntu 20.04+ –∞–±–æ Debian 11+
- –ú—ñ–Ω—ñ–º—É–º 4GB RAM
- 20GB –≤—ñ–ª—å–Ω–æ–≥–æ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç–æ—Ä—É
- Root –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É
- –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç-–∑'—î–¥–Ω–∞–Ω–Ω—è
```

### –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

```bash
# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
sudo apt update
sudo apt install -y curl docker.io docker-compose

# –ó–∞–ø—É—Å–∫ Docker
sudo systemctl start docker
sudo systemctl enable docker

# –î–æ–¥–∞–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–æ –≥—Ä—É–ø–∏ docker
sudo usermod -aG docker $USER
```

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –ö–ª—é—á–æ–≤—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏

- **–ü–æ–∫—Ä–∏—Ç—Ç—è —Ç–µ—Å—Ç–∞–º–∏:** > 80%
- **–ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ç–µ—Å—Ç—ñ–≤:** < 10 —Ö–≤–∏–ª–∏–Ω
- **–£—Å–ø—ñ—à–Ω—ñ—Å—Ç—å —Ç–µ—Å—Ç—ñ–≤:** > 95%
- **–ß–∞—Å –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è:** < 5 —Ö–≤–∏–ª–∏–Ω

### –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–≤–æ–¥—É
[2024-01-01 12:00:00] Starting Matrix Synapse Installer Test Suite
[SUCCESS] Tests passed: 15
[ERROR] Tests failed: 0
[INFO] Total tests: 15
[INFO] Success rate: 100%
[SUCCESS] All tests passed!
```

## üêõ –£—Å—É–Ω–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### –¢–∏–ø–æ–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏

#### 1. **–ü–æ–º–∏–ª–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É**
```bash
# –†—ñ—à–µ–Ω–Ω—è: –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —è–∫ root
sudo ./tests/test-installation.sh
```

#### 2. **–ü—Ä–æ–±–ª–µ–º–∏ –∑ Docker**
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å Docker
sudo systemctl status docker

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ Docker
sudo systemctl restart docker
```

#### 3. **–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ —Ä–µ—Å—É—Ä—Å—ñ–≤**
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏
free -h
df -h

# –ó–±—ñ–ª—å—à–∏—Ç–∏ swap —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
```

#### 4. **–ü—Ä–æ–±–ª–µ–º–∏ –∑ –º–µ—Ä–µ–∂–µ—é**
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑'—î–¥–Ω–∞–Ω–Ω—è
ping -c 3 8.8.8.8

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ DNS
nslookup google.com
```

## üîÑ –ù–µ–ø–µ—Ä–µ—Ä–≤–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è

### –õ–æ–∫–∞–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤ –ø–µ—Ä–µ–¥ –∫–æ–º—ñ—Ç–æ–º
./tests/test-installation.sh

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤ –∑ –¥–µ—Ç–∞–ª—å–Ω–∏–º –≤–∏–≤–æ–¥–æ–º
DEBUG=true ./tests/test-installation.sh
```

## üìö –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ—Å—É—Ä—Å–∏

### –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–≤ —Ç–µ—Å—Ç—ñ–≤
tail -f /tmp/matrix-test/installer/logs/test.log

# –û—á–∏—â–µ–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
sudo ./tests/cleanup.sh

# –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–≤—ñ—Ç—É –ø—Ä–æ —Ç–µ—Å—Ç–∏
./tests/generate-report.sh
```

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

- [Matrix Synapse Documentation](https://matrix-org.github.io/synapse/)
- [Docker Compose Documentation](https://docs.docker.com/compose/)
- [Bash Testing Best Practices](https://github.com/kward/shunit2)

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—É –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
./tests/test-dependencies.sh

# –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–≤–æ–¥—É
üß™ –¢–µ—Å—Ç –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π Matrix Synapse Installer
==============================================
[INFO] –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤—Å—ñ—Ö –∫–æ–º–∞–Ω–¥...
[SUCCESS] curl - –¥–æ—Å—Ç—É–ø–Ω–∏–π
[SUCCESS] wget - –¥–æ—Å—Ç—É–ø–Ω–∏–π
[SUCCESS] docker - –¥–æ—Å—Ç—É–ø–Ω–∏–π
...
[INFO] –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Python –ø–∞–∫–µ—Ç—ñ–≤...
[SUCCESS] Python –ø–∞–∫–µ—Ç flask - –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
[SUCCESS] Python –ø–∞–∫–µ—Ç flask-cors - –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
...
==============================================
üìä –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:
   –ü—Ä–æ–π–¥–µ–Ω–æ —Ç–µ—Å—Ç—ñ–≤: 2/2
   –£—Å–ø—ñ—à–Ω—ñ—Å—Ç—å: 100%
[SUCCESS] –í—Å—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–æ–π–¥–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ! ‚úÖ
```

### –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è
- **–°–∏—Å—Ç–µ–º–Ω—ñ –∫–æ–º–∞–Ω–¥–∏:** curl, wget, git, docker, nginx, ufw, fail2ban, certbot
- **Python –ø–∞–∫–µ—Ç–∏:** flask, flask-cors, pyyaml, requests, psutil, docker
- **–í–µ—Ä—Å—ñ—ó –ø—Ä–æ–≥—Ä–∞–º:** Python 3.8+, Docker 20.10+
- **–°–∏—Å—Ç–µ–º–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏:** RAM, –¥–∏—Å–∫–æ–≤–∏–π –ø—Ä–æ—Å—Ç—ñ—Ä
- **–ú–µ—Ä–µ–∂–µ–≤–µ –∑'—î–¥–Ω–∞–Ω–Ω—è:** –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö —Å–µ—Ä–≤–µ—Ä—ñ–≤

---

**–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** $(date)
**–í–µ—Ä—Å—ñ—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0 
# üìã –ê–Ω–∞–ª—ñ–∑ –ó–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π Matrix Synapse Installer

## üîç –ó–∞–≥–∞–ª—å–Ω–∏–π –û–≥–ª—è–¥

–ü—Ä–æ–µ–∫—Ç **Matrix Synapse Installer** –º–∞—î –∫–æ–º–ø–ª–µ–∫—Å–Ω—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É –∑ –±–∞–≥–∞—Ç—å–º–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è–º–∏, —è–∫—ñ –º–æ–∂–Ω–∞ —Ä–æ–∑–¥—ñ–ª–∏—Ç–∏ –Ω–∞ –∫—ñ–ª—å–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π:

## üê≥ Docker –û–±—Ä–∞–∑–∏ (–û—Å–Ω–æ–≤–Ω—ñ)

### –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö —Ç–∞ –∫–µ—à
- **postgres:15-alpine** - PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–∏—Ö
- **redis:7-alpine** - Redis –∫–µ—à

### –û—Å–Ω–æ–≤–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏
- **matrixdotorg/synapse:latest** - Matrix Synapse —Å–µ—Ä–≤–µ—Ä
- **nginx:alpine** - –í–µ–±-—Å–µ—Ä–≤–µ—Ä —Ç–∞ –ø—Ä–æ–∫—Å—ñ

### –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
- **prom/prometheus:latest** - Prometheus –º–µ—Ç—Ä–∏–∫–∏
- **grafana/grafana:latest** - Grafana –¥–∞—à–±–æ—Ä–¥–∏
- **prom/node-exporter:latest** - –°–∏—Å—Ç–µ–º–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏
- **grafana/loki:latest** - Loki –ª–æ–≥–∏
- **grafana/promtail:latest** - Promtail –∑–±—ñ—Ä –ª–æ–≥—ñ–≤

### –ú–æ—Å—Ç–∏ (Bridges)
- **dock.mau.dev/mautrix/signal:latest** - Signal Bridge
- **dock.mau.dev/mautrix/whatsapp:latest** - WhatsApp Bridge
- **dock.mau.dev/mautrix/discord:latest** - Discord Bridge

### –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Å–µ—Ä–≤—ñ—Å–∏
- **cloudflare/cloudflared:latest** - Cloudflare Tunnel
- **portainer/portainer-ce:latest** - Portainer —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è

### –†–æ–∑—Ä–æ–±–∫–∞ (dev)
- **mailhog/mailhog:latest** - –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è email
- **adminer:latest** - –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ë–î

## üì¶ –°–∏—Å—Ç–µ–º–Ω—ñ –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (apt)

### –û—Å–Ω–æ–≤–Ω—ñ —É—Ç–∏–ª—ñ—Ç–∏
```bash
curl wget git apt-transport-https ca-certificates gnupg lsb-release
```

### Python —Ç–∞ —Ä–æ–∑—Ä–æ–±–∫–∞
```bash
python3 python3-pip python3-venv python3-dev build-essential libssl-dev libffi-dev
```

### –í–µ–±-—Å–µ—Ä–≤–µ—Ä
```bash
nginx supervisor
```

### –°–∏—Å—Ç–µ–º–Ω—ñ —É—Ç–∏–ª—ñ—Ç–∏
```bash
cron rsync unzip jq net-tools
```

### –ë–µ–∑–ø–µ–∫–∞
```bash
ufw fail2ban openssl certbot python3-certbot-nginx
```

### Docker
```bash
docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

### –î–æ–¥–∞—Ç–∫–æ–≤—ñ
```bash
sqlite3 prometheus-node-exporter tar gzip
```

## üêç Python –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (pip)

### –í–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
```bash
flask flask-cors
```

### –£—Ç–∏–ª—ñ—Ç–∏
```bash
pyyaml requests psutil docker
```

## üåê –ó–æ–≤–Ω—ñ—à–Ω—ñ API —Ç–∞ —Å–µ—Ä–≤—ñ—Å–∏

### Cloudflare
- **Cloudflare Tunnel API** - –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–µ–∑–ø–µ—á–Ω–∏—Ö —Ç—É–Ω–µ–ª—ñ–≤
- **Cloudflare DNS API** - –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è DNS

### Matrix Federation
- **Matrix Federation API** - –¥–ª—è –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó –∑ —ñ–Ω—à–∏–º–∏ —Å–µ—Ä–≤–µ—Ä–∞–º–∏

### –ú–æ—Å—Ç–∏ API
- **Signal API** - —á–µ—Ä–µ–∑ mautrix-signal
- **WhatsApp API** - —á–µ—Ä–µ–∑ mautrix-whatsapp
- **Discord API** - —á–µ—Ä–µ–∑ mautrix-discord

## üîß –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

### –û—Å–Ω–æ–≤–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
- `MATRIX_DOMAIN` - –î–æ–º–µ–Ω –¥–ª—è Matrix —Å–µ—Ä–≤–µ—Ä–∞
- `MATRIX_BASE_DIR` - –ë–∞–∑–æ–≤–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è
- `MATRIX_POSTGRES_PASSWORD` - –ü–∞—Ä–æ–ª—å PostgreSQL

### –§—É–Ω–∫—Ü—ñ—ó
- `MATRIX_ALLOW_PUBLIC_REGISTRATION` - –ü—É–±–ª—ñ—á–Ω–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è
- `MATRIX_ENABLE_FEDERATION` - –§–µ–¥–µ—Ä–∞—Ü—ñ—è
- `MATRIX_INSTALL_ELEMENT` - –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Element
- `MATRIX_INSTALL_BRIDGES` - –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –º–æ—Å—Ç—ñ–≤
- `MATRIX_SETUP_MONITORING` - –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
- `MATRIX_SETUP_BACKUP` - –†–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è

### –ú–æ—Å—Ç–∏
- `MATRIX_INSTALL_SIGNAL_BRIDGE` - Signal –º–æ—Å—Ç
- `MATRIX_INSTALL_WHATSAPP_BRIDGE` - WhatsApp –º–æ—Å—Ç
- `MATRIX_INSTALL_DISCORD_BRIDGE` - Discord –º–æ—Å—Ç

### –ë–µ–∑–ø–µ–∫–∞
- `MATRIX_SSL_ENABLED` - SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏
- `MATRIX_FIREWALL_ENABLED` - –§–∞–π—Ä–≤–æ–ª
- `MATRIX_RATE_LIMITING` - –û–±–º–µ–∂–µ–Ω–Ω—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ

### –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
- `MATRIX_GRAFANA_PASSWORD` - –ü–∞—Ä–æ–ª—å Grafana
- `MATRIX_PROMETHEUS_ENABLED` - Prometheus

### Cloudflare
- `MATRIX_USE_CLOUDFLARE_TUNNEL` - –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Cloudflare Tunnel
- `MATRIX_CLOUDFLARE_TUNNEL_TOKEN` - –¢–æ–∫–µ–Ω Cloudflare

### –í–µ–± —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- `MATRIX_WEB_DASHBOARD_PORT` - –ü–æ—Ä—Ç –≤–µ–± —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
- `MATRIX_WEB_DASHBOARD_ENABLED` - –£–≤—ñ–º–∫–Ω–µ–Ω–Ω—è –≤–µ–± —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É

## üìÅ –§–∞–π–ª–æ–≤—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

### –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω—ñ —Ñ–∞–π–ª–∏
- `docker-compose.yml` - –û—Å–Ω–æ–≤–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
- `docker-compose.dev.yml` - –†–æ–∑—Ä–æ–±–∫–∞
- `.env` - –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
- `synapse/config/` - –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Synapse
- `nginx/conf.d/` - –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Nginx
- `monitoring/` - –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É

### –°–∫—Ä–∏–ø—Ç–∏
- `install.sh` - –û—Å–Ω–æ–≤–Ω–∏–π —ñ–Ω—Å—Ç–∞–ª—è—Ç–æ—Ä
- `bin/matrix-control.sh` - –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è
- `lib/*.sh` - –ú–æ–¥—É–ª—ñ
- `web/api-server.py` - API —Å–µ—Ä–≤–µ—Ä

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
- `docs/*.md` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
- `README.md` - –û—Å–Ω–æ–≤–Ω–∏–π README
- `LICENSE` - –õ—ñ—Ü–µ–Ω–∑—ñ—è

## üîó –ú–µ—Ä–µ–∂–µ–≤—ñ –ø–æ—Ä—Ç–∏

### –û—Å–Ω–æ–≤–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏
- **80, 443** - Nginx (HTTP/HTTPS)
- **8008, 8448** - Matrix Synapse
- **5432** - PostgreSQL (dev)
- **6379** - Redis (dev)

### –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
- **3000** - Grafana
- **9090** - Prometheus
- **3100** - Loki
- **9080** - Promtail (dev)

### –ú–æ—Å—Ç–∏
- **29328** - Signal Bridge
- **29318** - WhatsApp Bridge
- **29334** - Discord Bridge

### –î–æ–¥–∞—Ç–∫–æ–≤—ñ
- **9000** - Portainer
- **8081** - –í–µ–± —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **1025, 8025** - MailHog (dev)
- **8082** - Adminer (dev)

## üõ°Ô∏è –ë–µ–∑–ø–µ–∫–∞

### –§–∞–π—Ä–≤–æ–ª (ufw)
- –û–±–º–µ–∂–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É –¥–æ –ø–æ—Ä—Ç—ñ–≤
- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–∞–≤–∏–ª –¥–ª—è —Å–µ—Ä–≤—ñ—Å—ñ–≤

### Fail2ban
- –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –±—Ä—É—Ç—Ñ–æ—Ä—Å –∞—Ç–∞–∫
- –ë–ª–æ–∫—É–≤–∞–Ω–Ω—è –ø—ñ–¥–æ–∑—Ä—ñ–ª–∏—Ö IP

### SSL/TLS
- Let's Encrypt —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

### Cloudflare Tunnel
- –ë–µ–∑–ø–µ—á–Ω–∏–π –¥–æ—Å—Ç—É–ø –±–µ–∑ –ø—É–±–ª—ñ—á–Ω–æ–≥–æ IP
- –î–æ–¥–∞—Ç–∫–æ–≤–∏–π —Ä—ñ–≤–µ–Ω—å –∑–∞—Ö–∏—Å—Ç—É

## üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

### Prometheus
- –ó–±—ñ—Ä –º–µ—Ç—Ä–∏–∫
- –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö

### Grafana
- –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö
- –î–∞—à–±–æ—Ä–¥–∏

### Loki
- –ó–±—ñ—Ä –ª–æ–≥—ñ–≤
- –ü–æ—à—É–∫ –ø–æ –ª–æ–≥–∞—Ö

### Node Exporter
- –°–∏—Å—Ç–µ–º–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏
- –ê–ø–∞—Ä–∞—Ç–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏

## üîÑ –†–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ
- –©–æ–¥–µ–Ω–Ω–µ —Ä–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è
- –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è 30 –¥–Ω—ñ–≤
- –°—Ç–∏—Å–Ω–µ–Ω–Ω—è —Ç–∞ —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è

### –†—É—á–Ω–µ
- –ö–æ–º–∞–Ω–¥–∏ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è
- –ï–∫—Å–ø–æ—Ä—Ç/—ñ–º–ø–æ—Ä—Ç –¥–∞–Ω–∏—Ö

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –¢–µ—Å—Ç–æ–≤—ñ —Å–∫—Ä–∏–ø—Ç–∏
- `tests/test-dependencies.sh` - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
- `tests/test-installation.sh` - –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —ñ–Ω—Å—Ç–∞–ª—è—Ü—ñ—ó

### –†–æ–∑—Ä–æ–±–∫–∞
- MailHog –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è email
- Adminer –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ë–î
- –õ–æ–∫–∞–ª—å–Ω—ñ –ø–æ—Ä—Ç–∏ –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **32 —Ñ–∞–π–ª–∏** –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó —Ç–∞ –∫–æ–¥—É
- **15+ Docker –æ–±—Ä–∞–∑—ñ–≤**
- **20+ —Å–∏—Å—Ç–µ–º–Ω–∏—Ö –ø–∞–∫–µ—Ç—ñ–≤**
- **5 Python –º–æ–¥—É–ª—ñ–≤**
- **25+ –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞**
- **10+ –º–µ—Ä–µ–∂–µ–≤–∏—Ö –ø–æ—Ä—Ç—ñ–≤**

## ‚úÖ –í–∏—Å–Ω–æ–≤–∫–∏

–ü—Ä–æ–µ–∫—Ç –º–∞—î **–∫–æ–º–ø–ª–µ–∫—Å–Ω—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É** –∑ –±–∞–≥–∞—Ç—å–º–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è–º–∏, –∞–ª–µ –≤—Å—ñ –≤–æ–Ω–∏ **–¥–æ–±—Ä–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤–∞–Ω—ñ** —Ç–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω—ñ**. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è **Docker Compose** –∑ **–æ—Ñ—ñ—Ü—ñ–π–Ω–∏–º–∏ –æ–±—Ä–∞–∑–∞–º–∏** –∑–∞–±–µ–∑–ø–µ—á—É—î **—Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å** —Ç–∞ **–ª–µ–≥–∫—ñ—Å—Ç—å —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è**.

### üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

1. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏** Docker –æ–±—Ä–∞–∑–∏
2. **–ú–æ–Ω—ñ—Ç–æ—Ä–∏—Ç–∏** –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤
3. **–¢–µ—Å—Ç—É–≤–∞—Ç–∏** —Ä–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è
4. **–ü–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏** –±–µ–∑–ø–µ–∫—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
5. **–î–æ–∫—É–º–µ–Ω—Ç—É–≤–∞—Ç–∏** –∑–º—ñ–Ω–∏ –≤ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó

---
*–ó–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–ª—è –ø—Ä–æ–µ–∫—Ç—É Matrix Synapse Installer* 
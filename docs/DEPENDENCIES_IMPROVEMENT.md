# üì¶ –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

## üéØ –ú–µ—Ç–∞ –ø–æ–∫—Ä–∞—â–µ–Ω—å

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –≤—Å—ñ—Ö –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è Matrix Synapse Installer –∑ –ø–æ–≤–Ω–æ—é –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é —Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—î—é.

## ‚ú® –û—Å–Ω–æ–≤–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

### üîß –†–æ–∑—à–∏—Ä–µ–Ω–∏–π —Å–ø–∏—Å–æ–∫ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

#### –°–∏—Å—Ç–µ–º–Ω—ñ –ø–∞–∫–µ—Ç–∏
- **curl, wget, git** - –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –≤–µ—Ä—Å—ñ—è–º–∏
- **python3, python3-pip, python3-dev** - Python —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ
- **nginx, supervisor** - –≤–µ–± —Å–µ—Ä–≤–µ—Ä —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å–∞–º–∏
- **ufw, fail2ban** - –±–µ–∑–ø–µ–∫–∞ —Ç–∞ –∑–∞—Ö–∏—Å—Ç
- **certbot, openssl** - SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏
- **cron, rsync, unzip, jq** - —Å–∏—Å—Ç–µ–º–Ω—ñ —É—Ç–∏–ª—ñ—Ç–∏

#### Python –ø–∞–∫–µ—Ç–∏
- **flask, flask-cors** - –≤–µ–± API
- **pyyaml, requests, psutil** - –æ–±—Ä–æ–±–∫–∞ –¥–∞–Ω–∏—Ö
- **docker** - Python Docker API

#### Docker –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
- **docker-ce, docker-ce-cli** - Docker Engine
- **containerd.io** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–∏–π runtime
- **docker-buildx-plugin, docker-compose-plugin** - —Ä–æ–∑—à–∏—Ä–µ–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

### üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

#### –ù–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ—è `install_docker_dependencies()`
```bash
# –†–æ–∑—à–∏—Ä–µ–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è
install_docker_dependencies() {
    # –ë–∞–∑–æ–≤—ñ —Å–∏—Å—Ç–µ–º–Ω—ñ –ø–∞–∫–µ—Ç–∏
    apt install -y curl wget git python3 python3-pip nginx supervisor
    
    # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –±–µ–∑–ø–µ–∫–∏
    apt install -y ufw fail2ban openssl certbot
    
    # Docker —Ç–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
    apt install -y docker-ce docker-ce-cli containerd.io
    
    # Python –ø–∞–∫–µ—Ç–∏
    pip3 install flask flask-cors pyyaml requests psutil docker
}
```

#### –£–º–æ–≤–Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è
```bash
# –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –¥–ª—è –º–æ—Å—Ç—ñ–≤
if [[ "${INSTALL_BRIDGES}" == "true" ]]; then
    apt install -y sqlite3
fi

# –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É
if [[ "${SETUP_MONITORING}" == "true" ]]; then
    apt install -y prometheus-node-exporter
fi
```

### üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

#### –§—É–Ω–∫—Ü—ñ—è `verify_dependencies()`
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –≤—Å—ñ—Ö –∫–æ–º–∞–Ω–¥
local required_commands=(
    "curl" "wget" "git" "python3" "pip3" "docker" "docker-compose"
    "nginx" "supervisord" "cron" "rsync" "unzip" "jq" "ufw"
    "fail2ban-client" "openssl" "certbot" "ss" "ping" "free" "df"
)

for cmd in "${required_commands[@]}"; do
    if ! command -v "$cmd" &> /dev/null; then
        missing_deps+=("$cmd")
    fi
done
```

### üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

#### –ù–æ–≤–∏–π —Ç–µ—Å—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç `tests/test-dependencies.sh`
```bash
#!/bin/bash
# –¢–µ—Å—Ç –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π Matrix Synapse Installer

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–º–∞–Ω–¥
for cmd in "${REQUIRED_COMMANDS[@]}"; do
    check_command "$cmd"
done

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Python –ø–∞–∫–µ—Ç—ñ–≤
for package in "${REQUIRED_PYTHON_PACKAGES[@]}"; do
    check_python_package "$package"
done
```

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

#### –ù–æ–≤–∏–π —Ñ–∞–π–ª `docs/DEPENDENCIES.md`
- –ü–æ–≤–Ω–∏–π —Å–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
- –û–ø–∏—Å –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∫–æ–∂–Ω–æ–≥–æ –ø–∞–∫–µ—Ç—É
- –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –∑ —Ä—É—á–Ω–æ–≥–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è
- –†–æ–∑–≤'—è–∑–∞–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –∑ —Ä–µ—Å—É—Ä—Å—ñ–≤

## üîÑ –û–Ω–æ–≤–ª–µ–Ω–∏–π –ø—Ä–æ—Ü–µ—Å –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### –ù–æ–≤–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –∫—Ä–æ–∫—ñ–≤
1. **–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π** - `install_docker_dependencies()`
2. **–î–æ–¥–∞—Ç–∫–æ–≤—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ** - `install_additional_dependencies()`
3. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π** - `verify_dependencies()`
4. **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏** - `setup_directory_structure()`
5. **–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π** - `generate_synapse_config()`
6. **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏** - `setup_security()`
7. **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥** - `setup_monitoring_stack()` (—è–∫—â–æ —É–≤—ñ–º–∫–Ω–µ–Ω–æ)
8. **–†–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è** - `setup_backup_system()` (—è–∫—â–æ —É–≤—ñ–º–∫–Ω–µ–Ω–æ)
9. **–í–µ–± —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ Nginx –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (—è–∫—â–æ —É–≤—ñ–º–∫–Ω–µ–Ω–æ)
10. **Docker Compose** - `generate_docker_compose()`
11. **–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤—ñ—Å—ñ–≤** - `start_matrix_services()`
12. **–ü–æ—Å—Ç-—ñ–Ω—Å—Ç–∞–ª—è—Ü—ñ—è** - `post_installation_setup()`
13. **–û—á–∏—â–µ–Ω–Ω—è** - `cleanup_package_cache()`

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ–∫—Ä–∞—â–µ–Ω—å

### ‚úÖ –î–æ—Å—è–≥–Ω—É—Ç—ñ —Ü—ñ–ª—ñ
- **100% –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è** –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
- **–ü–æ–≤–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞** –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –≤—Å—ñ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤
- **–£–º–æ–≤–Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è** –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π
- **–î–µ—Ç–∞–ª—å–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è** –≤—Å—ñ—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
- **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è** —Å–∏—Å—Ç–µ–º–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
- **–û—á–∏—â–µ–Ω–Ω—è** –ø—ñ—Å–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### üìà –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –Ω–∞–¥—ñ–π–Ω–æ—Å—Ç—ñ
- **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è–º** - —É—Å—É–Ω–µ–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫
- **–õ–æ–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—É** - –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º
- **–û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫** - –∫–æ—Ä–µ–∫—Ç–Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –ø—Ä–∏ –Ω–µ–≤–¥–∞—á–∞—Ö
- **–í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è** - –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É

### üõ°Ô∏è –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏
- **–ê–∫—Ç—É–∞–ª—å–Ω—ñ –≤–µ—Ä—Å—ñ—ó** –≤—Å—ñ—Ö –ø–∞–∫–µ—Ç—ñ–≤
- **–ë–µ–∑–ø–µ—á–Ω—ñ –¥–∂–µ—Ä–µ–ª–∞** –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- **–í–∞–ª—ñ–¥–∞—Ü—ñ—è** –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤
- **–û—á–∏—â–µ–Ω–Ω—è** —Ç–∏–º—á–∞—Å–æ–≤–∏—Ö —Ñ–∞–π–ª—ñ–≤

## üîß –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è
```bash
# –í—Å—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
./install.sh
```

### –†—É—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞
```bash
# –¢–µ—Å—Ç –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
./tests/test-dependencies.sh

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó –∫–æ–º–∞–Ω–¥–∏
command -v docker && echo "Docker –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ" || echo "Docker –≤—ñ–¥—Å—É—Ç–Ω—ñ–π"
```

### –†—É—á–Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è
```bash
# –°–∏—Å—Ç–µ–º–Ω—ñ –ø–∞–∫–µ—Ç–∏
sudo apt update
sudo apt install -y curl wget git python3 python3-pip nginx supervisor

# Docker
curl -fsSL https://get.docker.com | sh

# Python –ø–∞–∫–µ—Ç–∏
pip3 install flask flask-cors pyyaml requests psutil docker
```

## üìã –°–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

### –°–∏—Å—Ç–µ–º–Ω—ñ –ø–∞–∫–µ—Ç–∏ (25+)
- curl, wget, git, apt-transport-https, ca-certificates
- gnupg, lsb-release, python3, python3-pip, python3-venv
- python3-dev, build-essential, libssl-dev, libffi-dev
- nginx, supervisor, cron, rsync, unzip, jq, net-tools
- ufw, fail2ban, openssl, certbot, python3-certbot-nginx

### Docker –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ (5)
- docker-ce, docker-ce-cli, containerd.io
- docker-buildx-plugin, docker-compose-plugin

### Python –ø–∞–∫–µ—Ç–∏ (6)
- flask, flask-cors, pyyaml, requests, psutil, docker

### –£–º–æ–≤–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
- **–ú–æ—Å—Ç–∏:** sqlite3
- **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥:** prometheus-node-exporter
- **–†–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è:** tar, gzip

## üéâ –í–∏—Å–Ω–æ–≤–æ–∫

–°–∏—Å—Ç–µ–º–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π Matrix Synapse Installer —Ç–µ–ø–µ—Ä:
- **–ü–æ–≤–Ω—ñ—Å—Ç—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–∞** - –Ω–µ –ø–æ—Ç—Ä–µ–±—É—î —Ä—É—á–Ω–æ–≥–æ –≤—Ç—Ä—É—á–∞–Ω–Ω—è
- **–ù–∞–¥—ñ–π–Ω–∞** - –∑ –ø–æ–≤–Ω–æ—é –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é —Ç–∞ –æ–±—Ä–æ–±–∫–æ—é –ø–æ–º–∏–ª–æ–∫
- **–î–æ–∫—É–º–µ–Ω—Ç–æ–≤–∞–Ω–∞** - –∑ –¥–µ—Ç–∞–ª—å–Ω–∏–º –æ–ø–∏—Å–æ–º –≤—Å—ñ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤
- **–¢–µ—Å—Ç–æ–≤–∞–Ω–∞** - –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º–∏ —Ç–µ—Å—Ç–∞–º–∏
- **–ë–µ–∑–ø–µ—á–Ω–∞** - –∑ –∞–∫—Ç—É–∞–ª—å–Ω–∏–º–∏ –≤–µ—Ä—Å—ñ—è–º–∏ —Ç–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—î—é

–¶–µ –∑–∞–±–µ–∑–ø–µ—á—É—î —Å—Ç–∞–±—ñ–ª—å–Ω—É —Ç–∞ –ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω—É —Ä–æ–±–æ—Ç—É —ñ–Ω—Å—Ç–∞–ª—è—Ç–æ—Ä–∞ –Ω–∞ —Ä—ñ–∑–Ω–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö. 
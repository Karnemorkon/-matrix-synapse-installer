# üìã –ì—ñ–¥ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Matrix Synapse

–î–µ—Ç–∞–ª—å–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Matrix Synapse —Å–µ—Ä–≤–µ—Ä–∞ –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é –º–æ—Å—Ç—ñ–≤.

## üìã –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

### –°–∏—Å—Ç–µ–º–Ω—ñ –≤–∏–º–æ–≥–∏
- **–û–°:** Ubuntu 20.04+ –∞–±–æ Debian 11+
- **RAM:** 2 GB (–º—ñ–Ω—ñ–º—É–º), 4 GB (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)
- **–î–∏—Å–∫:** 10 GB –≤—ñ–ª—å–Ω–æ–≥–æ –º—ñ—Å—Ü—è
- **–î–æ–º–µ–Ω:** –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–º DNS

### –ù–µ–æ–±—Ö—ñ–¥–Ω–µ –ø—Ä–æ–≥—Ä–∞–º–Ω–µ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è
- Docker 20.10+
- Docker Compose 2.0+
- Git

## üöÄ –ö—Ä–æ–∫–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### 1. –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º–∏

```bash
# –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏
sudo apt update -y && sudo apt upgrade -y

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏—Ö –ø–∞–∫–µ—Ç—ñ–≤
sudo apt install -y git curl wget

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–µ—Ä—Å—ñ—ó Docker
docker --version
docker-compose --version
```

### 2. –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —ñ–Ω—Å—Ç–∞–ª—è—Ç–æ—Ä–∞

```bash
# –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
git clone https://github.com/Karnemorkon/matrix-synapse-installer.git
cd matrix-synapse-installer

# –ù–∞–¥–∞–Ω–Ω—è –ø—Ä–∞–≤ –Ω–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
chmod +x install.sh
chmod +x bin/matrix-control.sh
```

### 3. –ó–∞–ø—É—Å–∫ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

```bash
# –ó–∞–ø—É—Å–∫ —ñ–Ω—Å—Ç–∞–ª—è—Ç–æ—Ä–∞
sudo ./install.sh
```

–ü—ñ–¥ —á–∞—Å –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –≤–∞–º –±—É–¥–µ –∑–∞–ø—Ä–æ–ø–æ–Ω–æ–≤–∞–Ω–æ:

- üåê **–î–æ–º–µ–Ω –¥–ª—è Matrix —Å–µ—Ä–≤–µ—Ä–∞** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: matrix.yourdomain.com)
- üìÅ **–ë–∞–∑–æ–≤–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è** (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: /opt/matrix)
- üîê **–ü–∞—Ä–æ–ª—å –¥–ª—è PostgreSQL**
- üåâ **–í–∏–±—ñ—Ä –º–æ—Å—Ç—ñ–≤** (Signal, WhatsApp, Discord)
- üìä **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É**
- üíæ **–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è**

### 4. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è DNS

–î–æ–¥–∞–π—Ç–µ A-–∑–∞–ø–∏—Å –¥–ª—è –≤–∞—à–æ–≥–æ –¥–æ–º–µ–Ω—É:

```
matrix.yourdomain.com.  IN  A  YOUR_SERVER_IP
```

### 5. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É SSL
./bin/matrix-control.sh ssl check

# –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤ (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
./bin/matrix-control.sh ssl renew
```

### 6. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞

```bash
# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
./bin/matrix-control.sh user create admin
```

## üîß –ü—ñ—Å–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É

```bash
# –ü–µ—Ä–µ–≥–ª—è–¥ —Å—Ç–∞—Ç—É—Å—É –≤—Å—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤
./bin/matrix-control.sh status

# –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
./bin/matrix-control.sh logs
```

### –î–æ—Å—Ç—É–ø –¥–æ —Å–µ—Ä–≤—ñ—Å—ñ–≤

#### Element Web
- URL: https://yourdomain.com (–æ—Å–Ω–æ–≤–Ω–∏–π –¥–æ–º–µ–Ω)
- –î–æ—Å—Ç—É–ø: –ü—É–±–ª—ñ—á–Ω–∏–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ HTTPS

#### Synapse Admin
- URL: http://localhost:8080
- –î–æ—Å—Ç—É–ø: –¢—ñ–ª—å–∫–∏ –ª–æ–∫–∞–ª—å–Ω–∏–π –¥–æ—Å—Ç—É–ø

#### –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
- Grafana: http://localhost:3000 (–ª–æ–∫–∞–ª—å–Ω–∏–π –¥–æ—Å—Ç—É–ø)
- Prometheus: http://localhost:9090 (–ª–æ–∫–∞–ª—å–Ω–∏–π –¥–æ—Å—Ç—É–ø)

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–æ—Å—Ç—ñ–≤

#### Signal Bridge
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É Signal –º–æ—Å—Ç—É
./bin/matrix-control.sh bridge status signal

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Signal –º–æ—Å—Ç—É
./bin/matrix-control.sh bridge setup signal
```

#### WhatsApp Bridge
```bash
# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è WhatsApp –º–æ—Å—Ç—É
./bin/matrix-control.sh bridge setup whatsapp
```

#### Discord Bridge
```bash
# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Discord –º–æ—Å—Ç—É
./bin/matrix-control.sh bridge setup discord
```

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ñ–∞–π—Ä–≤–æ–ª—É

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –±–µ–∑–ø–µ–∫–∏
./bin/matrix-control.sh security check
```

## üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

### –î–æ—Å—Ç—É–ø –¥–æ Grafana
- URL: http://localhost:3000 (–ª–æ–∫–∞–ª—å–Ω–∏–π –¥–æ—Å—Ç—É–ø)

### –î–æ—Å—Ç—É–ø –¥–æ Prometheus
- URL: http://localhost:9090 (–ª–æ–∫–∞–ª—å–Ω–∏–π –¥–æ—Å—Ç—É–ø)

### –î–æ—Å—Ç—É–ø –¥–æ Synapse Admin
- URL: http://localhost:8080 (–ª–æ–∫–∞–ª—å–Ω–∏–π –¥–æ—Å—Ç—É–ø)

## üíæ –†–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ä–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è
```bash
# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó –∫–æ–ø—ñ—ó
./bin/matrix-control.sh backup

# –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó –∫–æ–ø—ñ—ó
./bin/matrix-control.sh restore backup-file.tar.gz
```

## üîí –ë–µ–∑–ø–µ–∫–∞

### –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
1. –ó–º—ñ–Ω—ñ—Ç—å –ø–∞—Ä–æ–ª—ñ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
2. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª
3. –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–Ω–æ–≤–ª—é–π—Ç–µ —Å–∏—Å—Ç–µ–º—É
4. –ú–æ–Ω—ñ—Ç–æ—Ä—Ç–µ –ª–æ–≥–∏ –±–µ–∑–ø–µ–∫–∏

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –±–µ–∑–ø–µ–∫–∏
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –±–µ–∑–ø–µ–∫–∏
./bin/matrix-control.sh security audit
```

## üêõ –£—Å—É–Ω–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### –ü–æ—à–∏—Ä–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏

#### –ü—Ä–æ–±–ª–µ–º–∏ –∑ Docker
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Docker
sudo systemctl restart docker

# –û—á–∏—â–µ–Ω–Ω—è Docker
docker system prune -a
```

#### –ü—Ä–æ–±–ª–µ–º–∏ –∑ SSL
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤
./bin/matrix-control.sh ssl check

# –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤
./bin/matrix-control.sh ssl renew
```

#### –ü—Ä–æ–±–ª–µ–º–∏ –∑ –º–æ—Å—Ç–∞–º–∏
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –º–æ—Å—Ç—É
./bin/matrix-control.sh bridge restart signal

# –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤ –º–æ—Å—Ç—É
./bin/matrix-control.sh bridge logs signal
```

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–æ–ø–æ–º–æ–≥–∏

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é –∑ —É—Å—É–Ω–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º](TROUBLESHOOTING.md)
2. –ü–æ—à—É–∫–∞–π—Ç–µ –≤ [—ñ—Å–Ω—É—é—á–∏—Ö issues](https://github.com/Karnemorkon/matrix-synapse-installer/issues)
3. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–µ issue –∑ –¥–µ—Ç–∞–ª—å–Ω–∏–º –æ–ø–∏—Å–æ–º –ø—Ä–æ–±–ª–µ–º–∏

## üìö –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ—Å—É—Ä—Å–∏

- [Matrix.org –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è](https://matrix.org/docs/)
- [Synapse –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è](https://matrix-org.github.io/synapse/)
- [Mautrix –º–æ—Å—Ç–∏](https://github.com/mautrix)
- [Element –∫–ª—ñ—î–Ω—Ç](https://element.io/)

---

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** –¶–µ–π –≥—ñ–¥ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –±–∞–∑–æ–≤–æ–≥–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –¥–æ–¥–∞—Ç–∫–æ–≤–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏ —Ç–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É. 
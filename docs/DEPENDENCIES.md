# üì¶ –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ Matrix Synapse Installer

–ü–æ–≤–Ω–∏–π —Å–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π, —è–∫—ñ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥ —á–∞—Å —ñ–Ω—Å—Ç–∞–ª—è—Ü—ñ—ó.

## üîß –°–∏—Å—Ç–µ–º–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

### –ë–∞–∑–æ–≤—ñ –ø–∞–∫–µ—Ç–∏
- **curl** - –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ —Ç–∞ API –∑–∞–ø–∏—Ç–∏
- **wget** - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤
- **git** - –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤
- **apt-transport-https** - –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ HTTPS –¥–ª—è apt
- **ca-certificates** - SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏
- **gnupg** - —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è —Ç–∞ –ø—ñ–¥–ø–∏—Å–∞–Ω–Ω—è
- **lsb-release** - —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤

### Python –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
- **python3** - Python 3 —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä
- **python3-pip** - –º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç—ñ–≤ Python
- **python3-venv** - –≤—ñ—Ä—Ç—É–∞–ª—å–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ Python
- **python3-dev** - –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ñ —Ñ–∞–π–ª–∏ Python
- **build-essential** - —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –∑–±—ñ—Ä–∫–∏
- **libssl-dev** - SSL –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏
- **libffi-dev** - Foreign Function Interface

### –í–µ–± —Å–µ—Ä–≤–µ—Ä–∏
- **nginx** - –≤–µ–± —Å–µ—Ä–≤–µ—Ä —Ç–∞ reverse proxy
- **supervisor** - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å–∞–º–∏

### –°–∏—Å—Ç–µ–º–Ω—ñ —É—Ç–∏–ª—ñ—Ç–∏
- **cron** - –ø–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫ –∑–∞–≤–¥–∞–Ω—å
- **rsync** - —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è —Ñ–∞–π–ª—ñ–≤
- **unzip** - —Ä–æ–∑–ø–∞–∫—É–≤–∞–Ω–Ω—è –∞—Ä—Ö—ñ–≤—ñ–≤
- **jq** - –æ–±—Ä–æ–±–∫–∞ JSON
- **net-tools** - –º–µ—Ä–µ–∂–µ–≤—ñ —É—Ç–∏–ª—ñ—Ç–∏

## üõ°Ô∏è –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –±–µ–∑–ø–µ–∫–∏

### –§–∞–π—Ä–≤–æ–ª —Ç–∞ –∑–∞—Ö–∏—Å—Ç
- **ufw** - Uncomplicated Firewall
- **fail2ban** - –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ –±—Ä—É—Ç—Ñ–æ—Ä—Å –∞—Ç–∞–∫
- **openssl** - SSL/TLS —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏

### SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏
- **certbot** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤
- **python3-certbot-nginx** - —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è Certbot –∑ Nginx

## üê≥ Docker –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

### Docker Engine
- **docker-ce** - Docker Community Edition
- **docker-ce-cli** - Docker CLI
- **containerd.io** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–∏–π runtime
- **docker-buildx-plugin** - —Ä–æ–∑—à–∏—Ä–µ–Ω–∞ –∑–±—ñ—Ä–∫–∞ –æ–±—Ä–∞–∑—ñ–≤
- **docker-compose-plugin** - Docker Compose

## üåâ –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –¥–ª—è –º–æ—Å—Ç—ñ–≤

### –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö
- **sqlite3** - –ª–æ–∫–∞–ª—å–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –¥–ª—è –º–æ—Å—Ç—ñ–≤

## üìä –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É

### –°–∏—Å—Ç–µ–º–Ω–∏–π –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
- **prometheus-node-exporter** - –µ–∫—Å–ø–æ—Ä—Ç —Å–∏—Å—Ç–µ–º–Ω–∏—Ö –º–µ—Ç—Ä–∏–∫

## üíæ –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è

### –ê—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è
- **tar** - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞—Ä—Ö—ñ–≤—ñ–≤
- **gzip** - —Å—Ç–∏—Å–Ω–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤

## üêç Python –ø–∞–∫–µ—Ç–∏

### –í–µ–± API
- **flask** - –≤–µ–± —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **flask-cors** - Cross-Origin Resource Sharing
- **pyyaml** - –æ–±—Ä–æ–±–∫–∞ YAML —Ñ–∞–π–ª—ñ–≤
- **requests** - HTTP –∫–ª—ñ—î–Ω—Ç
- **psutil** - —Å–∏—Å—Ç–µ–º–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
- **docker** - Python Docker API

## üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –≤—Å—ñ—Ö –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏—Ö –∫–æ–º–∞–Ω–¥:

```bash
# –°–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–∏—Ö –∫–æ–º–∞–Ω–¥
curl wget git python3 pip3 docker docker-compose
nginx supervisord cron rsync unzip jq ufw
fail2ban-client openssl certbot ss ping free df
```

## üìã –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è
–í—Å—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥ —á–∞—Å –∑–∞–ø—É—Å–∫—É:

```bash
./install.sh
```

### –†—É—á–Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è
–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –æ–∫—Ä–µ–º–æ:

```bash
# –°–∏—Å—Ç–µ–º–Ω—ñ –ø–∞–∫–µ—Ç–∏
sudo apt update
sudo apt install -y curl wget git python3 python3-pip nginx supervisor

# Docker
curl -fsSL https://get.docker.com | sh

# Python –ø–∞–∫–µ—Ç–∏
pip3 install flask flask-cors pyyaml requests psutil docker
```

## üßπ –û—á–∏—â–µ–Ω–Ω—è

–ü—ñ—Å–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –æ—á–∏—â–µ–Ω–Ω—è:

```bash
# –í–∏–¥–∞–ª–µ–Ω–Ω—è –Ω–µ–ø–æ—Ç—Ä—ñ–±–Ω–∏—Ö –ø–∞–∫–µ—Ç—ñ–≤
apt autoremove -y

# –û—á–∏—â–µ–Ω–Ω—è –∫–µ—à—É
apt autoclean
```

## üîß –†–æ–∑–≤'—è–∑–∞–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∏ –∑ Python –ø–∞–∫–µ—Ç–∞–º–∏
```bash
# –û–Ω–æ–≤–ª–µ–Ω–Ω—è pip
python3 -m pip install --upgrade pip

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑ –∫–µ—à—É
pip3 install --no-cache-dir flask flask-cors
```

### –ü—Ä–æ–±–ª–µ–º–∏ –∑ Docker
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Docker
sudo systemctl restart docker

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É
sudo systemctl status docker
```

### –ü—Ä–æ–±–ª–µ–º–∏ –∑ SSL
```bash
# –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤
sudo certbot renew

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó Nginx
sudo nginx -t
```

## üìä –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤

### –ú—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ –≤–∏–º–æ–≥–∏
- **RAM:** 2 GB (4 GB —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)
- **–î–∏—Å–∫:** 10 GB –≤—ñ–ª—å–Ω–æ–≥–æ –º—ñ—Å—Ü—è
- **CPU:** 1 —è–¥—Ä–æ (2 —è–¥—Ä–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

### –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –≤–∏–º–æ–≥–∏
- **RAM:** 4 GB
- **–î–∏—Å–∫:** 20 GB SSD
- **CPU:** 2 —è–¥—Ä–∞
- **–ú–µ—Ä–µ–∂–∞:** —Å—Ç–∞–±—ñ–ª—å–Ω–µ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç-–∑'—î–¥–Ω–∞–Ω–Ω—è

## üîÑ –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
```bash
# –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏
sudo apt update && sudo apt upgrade -y

# –û–Ω–æ–≤–ª–µ–Ω–Ω—è Python –ø–∞–∫–µ—Ç—ñ–≤
pip3 list --outdated | cut -d ' ' -f1 | xargs -n1 pip3 install -U
```

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è Docker
```bash
# –û–Ω–æ–≤–ª–µ–Ω–Ω—è Docker –æ–±—Ä–∞–∑—ñ–≤
docker system prune -a
docker compose pull
```

---

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** –í—Å—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥ —á–∞—Å —ñ–Ω—Å—Ç–∞–ª—è—Ü—ñ—ó. –†—É—á–Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ç—ñ–ª—å–∫–∏ –≤ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö. 